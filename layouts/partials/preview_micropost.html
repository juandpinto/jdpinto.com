<article class="micropost h-entry">
  {{ if isset .Site.Params "summarizemicroposts" | and ( eq .Site.Params.summarizemicroposts true ) }}
    {{ if (not (isset .Params "externalurl")) }}
      <h2><a rel="full-article" href="{{ .Permalink }}">{{ .Title }}</a></h2>
    {{ else }}
        <h2><a rel="remote-article" href="{{ .Params.externalurl }}">→ {{ .Title }}</a> <a href="{{ .Permalink }}">∞</a></h2>
    {{ end }}

    <div class="postmeta">Posted on <time datetime="{{ .Date }}" pubdate="">{{ .Date.Format "January 2, 2006" }}</time>
      {{ if (isset .Params "categories") }}
        in
        <span class="categories">
          {{ range $i, $v := .Params.categories }}
            <a class="category" href="/categories/{{ $v | urlize }}">{{ $v }}</a>{{ if ne (len $.Params.categories) (add $i 1) }}, {{ end }}
          {{ end }}
        </span>
      {{ end }}
    </div>

    <p>
      {{ if or (not (isset .Params "externalurl")) }}
        {{ .Summary }}
      {{ else }}
        {{ .Content }}
      {{ end }}
    </p>

    {{ if .Truncated }}
      {{ if (not (isset .Params "externalurl")) }}
        <a class="continue" rel="full-article" href="{{ .Permalink }}">Continue Reading »</a>
      {{ end }}
    {{ end }}
  {{ else }}
    <div class="e-content">
      {{ .Content }}
      {{ if isset .Params "mf-photo" }}
        {{ range (index .Params "mf-photo") }}
          <figure>
            <a href="{{ . }}">
              <img src="{{ . }}" style="width: 80%;" class="u-photo align-center">
            </a>
          </figure>
        {{ end }}
      {{ end }}
    </div>
    <div class="micropost-footer">
      <a class="micropost-date u-url" href="{{ .Permalink }}"><aside class="dates dt-published">{{ .Date.Format "2006/01/02 3:04 PM MST" }}</aside></a>
      {{ if isset .Params "twitter" }}
        <a class="u-syndication" href="{{ .Params.twitter }}">
          <span class="inline-svg" style="vertical-align:-0.05em">
          {{- $fname:=print "fontawesome/twitter.svg" -}}
          {{- $path:="<path" -}}
          {{- $fill:="<path fill=\"#888888\"" -}}
          {{ replace (readFile $fname) $path $fill | safeHTML }}
          </span>
        </a>
      {{ end }}
      {{ if isset .Params "mf-syndication" }}
        {{ range (index .Params "mf-syndication") }}
          <a class="u-syndication" href="{{ . }}"></a>
        {{ end }}
      {{ end }}
    </div>
  {{ end }}
</article>
