{{ if (isset .Params "loc") and (eq .Params.loc "main") }}
  {{ $paginator := .Paginate (where .Site.Pages "Section" "microblog") }}
{{ else }}
  {{ $paginator := .Paginate (where .Data.Pages "Type" "!=" "page") }}
{{ end }}

{{ range .Paginator.Pages }}
  {{ $url := replace .Permalink .Site.BaseURL "" }}

  {{ if or (eq .Type "microblog") (eq .Type "micropost") }}
    {{ partial "preview_micropost.html" . }}
  {{ end }}

  {{ if or (eq .Type "blog") (eq .Type "post") }}
    {{ partial "preview_post.html" . }}
  {{ end }}

{{ end }}

{{ partial "pagination.html" . }}
